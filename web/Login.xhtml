<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
        <f:event type="preRenderView" listener="#{Login.securityLogin()}"/>
        <link href="resources/css/style_Login.css" rel="stylesheet" type="text/css"/>

    </h:head>
    <h:body>
       
            <h1>Employer Log in</h1>
           

        <h:form id="form">
            <h:panelGroup >
                <p:inputText value="#{Login.DNI}" placeholder="Usuario" disabled="#{Login.intentos le 2 ? false:true}" required="true"/>
                <p:password value="#{Login.pass}" placeholder="ContraseÃ±a" disabled="#{Login.intentos le 2 ? false:true}"/>
                <p:commandButton id="BtnIniciarSesion" value="Ingresar" actionListener="#{Login.startSessionEmpleado()}" update="form" oncomplete="refresh();" />
                <p:blockUI block="form" trigger="BtnIniciarSesion" />
            </h:panelGroup>
            <h:panelGroup rendered="#{Login.intentos >= 3 ? true:false}">
                <h:outputText id="txt_count" value="#{Login.number}" />
                <p:poll interval="3" listener="#{Login.increment}" update="form" oncomplete="refresh();" />
            </h:panelGroup>

            <p:remoteCommand name="refresh" update="form"/>
        </h:form>   



    </h:body>
</html>

